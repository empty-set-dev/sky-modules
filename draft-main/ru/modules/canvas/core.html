<!DOCTYPE html>
<html lang="ru" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Canvas Core | Sky Modules</title>
    <meta name="description" content="Мощные TypeScript утилиты для современной разработки">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/sky-modules/assets/style.CQKpZw7F.css" as="style">
    <link rel="preload stylesheet" href="/sky-modules/vp-icons.css" as="style">
    
    <script type="module" src="/sky-modules/assets/app.eRLQEX5b.js"></script>
    <link rel="preload" href="/sky-modules/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/sky-modules/assets/chunks/theme.CTnXz4Tf.js">
    <link rel="modulepreload" href="/sky-modules/assets/chunks/framework.C7_dZ9MF.js">
    <link rel="modulepreload" href="/sky-modules/assets/ru_modules_canvas_core.md.rRTU9hFc.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-72122534><!--[--><!--]--><!--[--><span tabindex="-1" data-v-5a3f9a6c></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-5a3f9a6c>Skip to content</a><!--]--><!----><header class="VPNav" data-v-72122534 data-v-437b9c3f><div class="VPNavBar" data-v-437b9c3f data-v-f24c6dd7><div class="wrapper" data-v-f24c6dd7><div class="container" data-v-f24c6dd7><div class="title" data-v-f24c6dd7><div class="VPNavBarTitle" data-v-f24c6dd7 data-v-47219bf0><a class="title" href="/sky-modules/ru/" data-v-47219bf0><!--[--><!--]--><!----><span data-v-47219bf0>Sky Modules</span><!--[--><!--]--></a></div></div><div class="content" data-v-f24c6dd7><div class="content-body" data-v-f24c6dd7><!--[--><!--]--><div class="VPNavBarSearch search" data-v-f24c6dd7><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-f24c6dd7 data-v-817c196c><span id="main-nav-aria-label" class="visually-hidden" data-v-817c196c> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/sky-modules/ru/guide/getting-started.html" tabindex="0" data-v-817c196c data-v-9e522820><!--[--><span data-v-9e522820>Руководство</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/sky-modules/ru/modules/" tabindex="0" data-v-817c196c data-v-9e522820><!--[--><span data-v-9e522820>Модули</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/sky-modules/ru/playground/" tabindex="0" data-v-817c196c data-v-9e522820><!--[--><span data-v-9e522820>Примеры</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/sky-modules/ru/playground/" tabindex="0" data-v-817c196c data-v-9e522820><!--[--><span data-v-9e522820>Песочница</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-817c196c data-v-28c08d37><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-28c08d37><span class="text" data-v-28c08d37><!----><span data-v-28c08d37>NPM</span><span class="vpi-chevron-down text-icon" data-v-28c08d37></span></span></button><div class="menu" data-v-28c08d37><div class="VPMenu" data-v-28c08d37 data-v-aa3ea247><div class="items" data-v-aa3ea247><!--[--><!--[--><div class="VPMenuLink" data-v-aa3ea247 data-v-aa3582bd><a class="VPLink link vp-external-link-icon" href="https://npmjs.com/package/@sky-modules/core" target="_blank" rel="noreferrer" data-v-aa3582bd><!--[--><span data-v-aa3582bd>@sky-modules/core</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-aa3ea247 data-v-aa3582bd><a class="VPLink link" href="/sky-modules/ru/packages/" data-v-aa3582bd><!--[--><span data-v-aa3582bd>Все пакеты</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-f24c6dd7 data-v-4ff4cd81 data-v-28c08d37><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-28c08d37><span class="text" data-v-28c08d37><span class="vpi-languages option-icon" data-v-28c08d37></span><!----><span class="vpi-chevron-down text-icon" data-v-28c08d37></span></span></button><div class="menu" data-v-28c08d37><div class="VPMenu" data-v-28c08d37 data-v-aa3ea247><!----><!--[--><!--[--><div class="items" data-v-4ff4cd81><p class="title" data-v-4ff4cd81>Русский</p><!--[--><div class="VPMenuLink" data-v-4ff4cd81 data-v-aa3582bd><a class="VPLink link" href="/sky-modules/modules/canvas/core.html" data-v-aa3582bd><!--[--><span data-v-aa3582bd>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-f24c6dd7 data-v-25919257><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-25919257 data-v-2902871c data-v-ba29bd6d><span class="check" data-v-ba29bd6d><span class="icon" data-v-ba29bd6d><!--[--><span class="vpi-sun sun" data-v-2902871c></span><span class="vpi-moon moon" data-v-2902871c></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-f24c6dd7 data-v-2d21eb2a data-v-76bbfcc2><!--[--><a class="VPSocialLink no-icon" href="https://github.com/empty-set-dev/sky-modules" aria-label="github" target="_blank" rel="noopener" data-v-76bbfcc2 data-v-8a316683><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://npmjs.com/~sky-modules" aria-label="npm" target="_blank" rel="noopener" data-v-76bbfcc2 data-v-8a316683><span class="vpi-social-npm"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-f24c6dd7 data-v-4f102326 data-v-28c08d37><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-28c08d37><span class="vpi-more-horizontal icon" data-v-28c08d37></span></button><div class="menu" data-v-28c08d37><div class="VPMenu" data-v-28c08d37 data-v-aa3ea247><!----><!--[--><!--[--><div class="group translations" data-v-4f102326><p class="trans-title" data-v-4f102326>Русский</p><!--[--><div class="VPMenuLink" data-v-4f102326 data-v-aa3582bd><a class="VPLink link" href="/sky-modules/modules/canvas/core.html" data-v-aa3582bd><!--[--><span data-v-aa3582bd>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-4f102326><div class="item appearance" data-v-4f102326><p class="label" data-v-4f102326>Appearance</p><div class="appearance-action" data-v-4f102326><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-4f102326 data-v-2902871c data-v-ba29bd6d><span class="check" data-v-ba29bd6d><span class="icon" data-v-ba29bd6d><!--[--><span class="vpi-sun sun" data-v-2902871c></span><span class="vpi-moon moon" data-v-2902871c></span><!--]--></span></span></button></div></div></div><div class="group" data-v-4f102326><div class="item social-links" data-v-4f102326><div class="VPSocialLinks social-links-list" data-v-4f102326 data-v-76bbfcc2><!--[--><a class="VPSocialLink no-icon" href="https://github.com/empty-set-dev/sky-modules" aria-label="github" target="_blank" rel="noopener" data-v-76bbfcc2 data-v-8a316683><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://npmjs.com/~sky-modules" aria-label="npm" target="_blank" rel="noopener" data-v-76bbfcc2 data-v-8a316683><span class="vpi-social-npm"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-f24c6dd7 data-v-5f70e517><span class="container" data-v-5f70e517><span class="top" data-v-5f70e517></span><span class="middle" data-v-5f70e517></span><span class="bottom" data-v-5f70e517></span></span></button></div></div></div></div><div class="divider" data-v-f24c6dd7><div class="divider-line" data-v-f24c6dd7></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-72122534 data-v-007caa21><div class="container" data-v-007caa21><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-007caa21 data-v-64adb3c2><button data-v-64adb3c2>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-72122534 data-v-90b5ebf2><div class="VPDoc has-aside" data-v-90b5ebf2 data-v-647e6379><!--[--><!--]--><div class="container" data-v-647e6379><div class="aside" data-v-647e6379><div class="aside-curtain" data-v-647e6379></div><div class="aside-container" data-v-647e6379><div class="aside-content" data-v-647e6379><div class="VPDocAside" data-v-647e6379 data-v-0cb1e76b><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-0cb1e76b data-v-3ec0e41e><div class="content" data-v-3ec0e41e><div class="outline-marker" data-v-3ec0e41e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-3ec0e41e>On this page</div><ul class="VPDocOutlineItem root" data-v-3ec0e41e data-v-97e66f2e><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-0cb1e76b></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-647e6379><div class="content-container" data-v-647e6379><!--[--><!--]--><main class="main" data-v-647e6379><div style="position:relative;" class="vp-doc _sky-modules_ru_modules_canvas_core" data-v-647e6379><div><h1 id="canvas-core" tabindex="-1">Canvas Core <a class="header-anchor" href="#canvas-core" aria-label="Permalink to &quot;Canvas Core&quot;">​</a></h1><div class="sky-gradient-text" style="font-size:1.2em;margin:1em 0;"> core utility module </div><p>Основные классы рендеринга для Canvas системы. Предоставляет базовый граф сцены, движок рендеринга и объектные примитивы.</p><h2 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h2><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @sky-modules/core</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { core } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/core&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="обзор" tabindex="-1">Обзор <a class="header-anchor" href="#обзор" aria-label="Permalink to &quot;Обзор&quot;">​</a></h2><p>Canvas Core реализует архитектуру графа сцены аналогичную Three.js, но оптимизированную для 2D canvas рендеринга. Предоставляет:</p><ul><li><strong>Граф сцены</strong>: Иерархическая организация отрисовываемых объектов</li><li><strong>Система трансформаций</strong>: Позиция, поворот, масштаб с мировыми трансформациями</li><li><strong>Движок рендеринга</strong>: Высокопроизводительный canvas рендеринг с поддержкой pixel ratio</li><li><strong>Объектная модель</strong>: Базовые классы для всех рендерируемых сущностей</li></ul><h2 id="основные-классы" tabindex="-1">Основные классы <a class="header-anchor" href="#основные-классы" aria-label="Permalink to &quot;Основные классы&quot;">​</a></h2><h3 id="object2d" tabindex="-1">Object2D <a class="header-anchor" href="#object2d" aria-label="Permalink to &quot;Object2D&quot;">​</a></h3><p><strong>Файл:</strong> <code>Object2D.ts</code></p><p>Базовый класс для всех объектов в графе сцены. Предоставляет свойства трансформации, управление иерархией и вычисление мировых трансформаций.</p><p><strong>Возможности:</strong></p><ul><li>Трансформации позиции, поворота, масштаба с fluent API</li><li>Иерархия родитель-потомок с автоматическим распространением трансформаций</li><li>Кеширование мировых трансформаций для производительности</li><li>Матричные трансформации (совместимый с Three.js API)</li><li>Методы обхода графа сцены</li><li>Поиск объектов по id/name</li></ul><p><strong>Использование:</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRotation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setScale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setVisible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Иерархия</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(child)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(child)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Обход</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">child</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(child.name))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">traverseVisible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">child</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* только видимые */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Мировые трансформации</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worldPos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWorldPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> localPoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">worldToLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vector2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>Свойства:</strong></p><ul><li><code>position: Vector2</code> - Локальная позиция</li><li><code>rotation: number</code> - Поворот в радианах</li><li><code>scale: Vector2</code> - Локальный масштаб</li><li><code>visible: boolean</code> - Флаг видимости</li><li><code>children: Object2D[]</code> - Дочерние объекты</li><li><code>parent: Object2D | null</code> - Родительский объект</li><li><code>id?: string</code> - Уникальный идентификатор</li><li><code>name?: string</code> - Имя объекта</li></ul><p><strong>Методы трансформации:</strong></p><ul><li><code>setPosition(x, y)</code> - Установить позицию</li><li><code>setRotation(angle)</code> - Установить поворот</li><li><code>setScale(x, y)</code> - Установить масштаб</li><li><code>translateX(distance)</code> / <code>translateY(distance)</code> - Сдвинуть вдоль оси</li><li><code>rotateZ(angle)</code> - Повернуть вокруг оси Z</li><li><code>lookAt(x, y)</code> - Направить на позицию</li></ul><p><strong>Методы иерархии:</strong></p><ul><li><code>add(object)</code> - Добавить потомка</li><li><code>remove(object)</code> - Удалить потомка</li><li><code>traverse(callback)</code> - Обойти всех потомков</li><li><code>traverseVisible(callback)</code> - Обойти только видимых потомков</li><li><code>traverseAncestors(callback)</code> - Обойти предков вверх</li></ul><p><strong>Методы мировых трансформаций:</strong></p><ul><li><code>getWorldTransform()</code> - Получить закешированную мировую трансформацию</li><li><code>getWorldPosition()</code> - Получить мировую позицию</li><li><code>getWorldRotation()</code> - Получить мировой поворот</li><li><code>getWorldScale()</code> - Получить мировой масштаб</li><li><code>localToWorld(point)</code> - Преобразовать точку из локальных в мировые координаты</li><li><code>worldToLocal(point)</code> - Преобразовать точку из мировых в локальные координаты</li></ul><p><strong>Методы матриц (совместимые с Three.js):</strong></p><ul><li><code>updateMatrix()</code> - Обновить локальную матрицу</li><li><code>updateMatrixWorld(force)</code> - Обновить мировую матрицу рекурсивно</li><li><code>applyMatrix3(matrix)</code> - Применить матричную трансформацию</li></ul><p><strong>Методы поиска:</strong></p><ul><li><code>getObjectById(id)</code> - Найти объект по id</li><li><code>getObjectByName(name)</code> - Найти объект по имени</li></ul><h3 id="scene" tabindex="-1">Scene <a class="header-anchor" href="#scene" aria-label="Permalink to &quot;Scene&quot;">​</a></h3><p><strong>Файл:</strong> <code>Scene.ts</code></p><p>Корень графа сцены. Расширяет <code>Object2D</code> поддержкой фона.</p><p><strong>Возможности:</strong></p><ul><li>Корневой контейнер графа сцены</li><li>Поддержка цвета/градиента/паттерна фона</li><li>Все возможности иерархии Object2D</li></ul><p><strong>Использование:</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> scene</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setBackground</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#000000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Добавить объекты в сцену</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mesh)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(group)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>Свойства:</strong></p><ul><li>Все свойства Object2D</li><li><code>background?: string | CanvasGradient | CanvasPattern</code> - Фон сцены</li></ul><p><strong>Методы:</strong></p><ul><li>Все методы Object2D</li><li><code>setBackground(style)</code> - Установить стиль фона</li><li><code>clone()</code> - Глубокое клонирование сцены</li></ul><h3 id="mesh" tabindex="-1">Mesh <a class="header-anchor" href="#mesh" aria-label="Permalink to &quot;Mesh&quot;">​</a></h3><p><strong>Файл:</strong> <code>Mesh.ts</code></p><p>Отрисовываемый объект, комбинирующий геометрию и материал. Основная рендерируемая сущность.</p><p><strong>Возможности:</strong></p><ul><li>Композиция Геометрия + Материал</li><li>Поддержка CSS Box компонента (flexbox лэйауты)</li><li>Поддержка overflow scrolling</li><li>Отслеживание размеров контента</li><li>Кастомная логика рендеринга</li></ul><p><strong>Использование:</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mesh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/core/Mesh&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { RectGeometry } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/geometries/RectGeometry&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { BasicMaterial } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/materials/BasicMaterial&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mesh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RectGeometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ width: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BasicMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#ff0000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mesh.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mesh)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>Свойства:</strong></p><ul><li>Все свойства Object2D</li><li><code>geometry: Geometry</code> - Определение формы</li><li><code>material: Material</code> - Стиль отрисовки</li><li><code>isMesh: boolean</code> - Идентификатор типа (всегда true)</li></ul><p><strong>Свойства Box компонента</strong> (устанавливаются Box компонентом):</p><ul><li><code>_boxStyles?: CSSProperties</code> - CSS стили для Box рендеринга</li><li><code>_isBox?: boolean</code> - Флаг Box компонента</li><li><code>_boxWidth?: number</code> - Вычисленная ширина box</li><li><code>_boxHeight?: number</code> - Вычисленная высота box</li><li><code>_contentHeight?: number</code> - Полная высота контента (для скроллинга)</li><li><code>_scrollX: number</code> - Горизонтальное смещение скролла</li><li><code>_scrollY: number</code> - Вертикальное смещение скролла</li></ul><p><strong>Методы:</strong></p><ul><li>Все методы Object2D</li><li><code>render(context, pixelRatio)</code> - Отрисовать на canvas</li><li><code>raycast(raycaster, intersects)</code> - Тестирование пересечения луча</li><li><code>clone()</code> - Клонировать mesh (поверхностное копирование geometry/material)</li></ul><p><strong>Рендеринг:</strong> Метод <code>render</code> обрабатывает два режима рендеринга:</p><ol><li><strong>Стандартный Mesh</strong>: Применяет материал, рисует геометрию, рендерит с материалом</li><li><strong>Box компонент</strong>: Использует <code>renderCSSToCanvas</code> для CSS-подобного рендеринга с flexbox</li></ol><h3 id="group" tabindex="-1">Group <a class="header-anchor" href="#group" aria-label="Permalink to &quot;Group&quot;">​</a></h3><p><strong>Файл:</strong> <code>Group.ts</code></p><p>Контейнер для организации множества объектов. Полезен для группировки связанных mesh&#39;ей.</p><p><strong>Возможности:</strong></p><ul><li>Трансформация группы объектов вместе</li><li>Организация иерархии сцены</li><li>Все возможности иерархии Object2D</li><li>Поддержка глубокого клонирования</li></ul><p><strong>Использование:</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">group.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mesh1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">group.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mesh2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">group.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(group)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Оба mesh&#39;а двигаются вместе с группой</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">group.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">translateX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Свойства:</strong></p><ul><li>Все свойства Object2D</li><li><code>isGroup: boolean</code> - Идентификатор типа (всегда true)</li></ul><p><strong>Методы:</strong></p><ul><li>Все методы Object2D</li><li><code>clone()</code> - Глубокое клонирование группы со всеми потомками</li></ul><h3 id="canvasrenderer" tabindex="-1">CanvasRenderer <a class="header-anchor" href="#canvasrenderer" aria-label="Permalink to &quot;CanvasRenderer&quot;">​</a></h3><p><strong>Файл:</strong> <code>CanvasRenderer.ts</code> (844 строки)</p><p>Основной движок рендеринга. Предоставляет fluent API для операций рисования на canvas с автоматическим масштабированием по pixel ratio.</p><p><strong>Возможности:</strong></p><ul><li>Инициализация canvas и обработка resize</li><li>Fluent API для рисования (цепочки методов)</li><li>Автоматическое масштабирование devicePixelRatio</li><li>Делегирование управления стилями StyleManager</li><li>Делегирование рендеринга скроллбаров ScrollbarRenderer</li><li>Интеграция профилирования производительности</li><li>Рендеринг графа сцены</li></ul><p><strong>Использование:</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CanvasRenderer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/core/CanvasRenderer&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Scene </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/core/Scene&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CanvasRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  canvas: document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;canvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  pixelRatio: window.devicePixelRatio</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> scene</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setBackground</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#000000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Цикл рендеринга</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scene)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(animate)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>Параметры конструктора:</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CanvasRendererParameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLCanvasElement</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Canvas элемент (создает новый если не указан)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  pixelRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Pixel ratio (по умолчанию devicePixelRatio)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Основные свойства:</strong></p><ul><li><code>canvas: HTMLCanvasElement</code> - DOM canvas элемент</li><li><code>drawContext: CanvasRenderingContext2D</code> - 2D контекст рендеринга</li><li><code>pixelRatio: number</code> - Device pixel ratio</li></ul><p><strong>Методы рендеринга:</strong></p><ul><li><code>clear()</code> - Очистить canvas</li><li><code>render(scene)</code> - Отрисовать граф сцены</li><li><code>onResize()</code> - Обработать resize canvas</li></ul><p><strong>Примитивы рисования:</strong></p><ul><li><code>beginPath()</code> - Начать новый путь</li><li><code>closePath()</code> - Закрыть текущий путь</li><li><code>moveTo(x, y)</code> - Переместить перо в позицию</li><li><code>lineTo(x, y)</code> - Нарисовать линию до позиции</li><li><code>rect(x, y, w, h)</code> - Нарисовать прямоугольный путь</li><li><code>arc(x, y, r, start, end)</code> - Нарисовать дугу</li><li><code>ellipse(x, y, rx, ry, rot, start, end)</code> - Нарисовать эллипс</li><li><code>quadraticCurveTo(cpx, cpy, x, y)</code> - Квадратичная кривая</li><li><code>bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)</code> - Кривая Безье</li><li><code>fill()</code> - Залить текущий путь</li><li><code>stroke()</code> - Обвести текущий путь</li><li><code>clip()</code> - Обрезать по текущему пути</li></ul><p><strong>Методы текста:</strong></p><ul><li><code>fillText(text, x, y, maxWidth?)</code> - Нарисовать залитый текст</li><li><code>strokeText(text, x, y, maxWidth?)</code> - Нарисовать обведенный текст</li><li><code>measureText(text)</code> - Измерить размеры текста</li><li><code>setFont(font)</code> - Установить стиль шрифта</li><li><code>setTextAlign(align)</code> - Установить выравнивание текста</li><li><code>setTextBaseline(baseline)</code> - Установить базовую линию текста</li></ul><p><strong>Методы трансформаций:</strong></p><ul><li><code>save()</code> - Сохранить состояние canvas</li><li><code>restore()</code> - Восстановить состояние canvas</li><li><code>translate(x, y)</code> - Сдвинуть систему координат</li><li><code>rotate(angle)</code> - Повернуть систему координат</li><li><code>scale(x, y)</code> - Масштабировать систему координат</li><li><code>resetTransform()</code> - Сбросить матрицу трансформации</li><li><code>setTransform(a, b, c, d, e, f)</code> - Установить матрицу трансформации</li></ul><p><strong>Методы стилей</strong> (делегируются StyleManager):</p><ul><li><code>setFillStyle(style)</code> - Установить цвет/градиент/паттерн заливки</li><li><code>setStrokeStyle(style)</code> - Установить цвет/градиент/паттерн обводки</li><li><code>setLineWidth(width)</code> - Установить ширину линии (автомасштабируется по pixelRatio)</li><li><code>setLineCap(cap)</code> - Установить стиль концов линии</li><li><code>setLineJoin(join)</code> - Установить стиль соединений линии</li><li><code>setMiterLimit(limit)</code> - Установить miter limit</li><li><code>setLineDash(segments)</code> - Установить паттерн пунктира (автомасштабируется по pixelRatio)</li><li><code>setLineDashOffset(offset)</code> - Установить смещение пунктира (автомасштабируется по pixelRatio)</li><li><code>setGlobalAlpha(alpha)</code> - Установить глобальную прозрачность</li><li><code>setGlobalCompositeOperation(op)</code> - Установить операцию композиции</li><li><code>setShadowBlur(blur)</code> - Установить размытие тени (автомасштабируется по pixelRatio)</li><li><code>setShadowColor(color)</code> - Установить цвет тени</li><li><code>setShadowOffsetX(offset)</code> - Установить X смещение тени (автомасштабируется по pixelRatio)</li><li><code>setShadowOffsetY(offset)</code> - Установить Y смещение тени (автомасштабируется по pixelRatio)</li></ul><p><strong>Методы градиентов/паттернов:</strong></p><ul><li><code>createLinearGradient(x0, y0, x1, y1)</code> - Создать линейный градиент</li><li><code>createRadialGradient(x0, y0, r0, x1, y1, r1)</code> - Создать радиальный градиент</li><li><code>createConicGradient(angle, x, y)</code> - Создать конический градиент</li><li><code>createPattern(image, repetition)</code> - Создать паттерн</li></ul><p><strong>Методы изображений:</strong></p><ul><li><code>drawImage(image, ...args)</code> - Нарисовать изображение на canvas</li></ul><p><strong>Манипуляция пикселями:</strong></p><ul><li><code>getImageData(x, y, w, h)</code> - Получить данные пикселей</li><li><code>putImageData(imageData, x, y)</code> - Поместить данные пикселей</li><li><code>createImageData(w, h)</code> - Создать новые данные пикселей</li></ul><h2 id="специализированные-модули" tabindex="-1">Специализированные модули <a class="header-anchor" href="#специализированные-модули" aria-label="Permalink to &quot;Специализированные модули&quot;">​</a></h2><h3 id="stylemanager" tabindex="-1">StyleManager <a class="header-anchor" href="#stylemanager" aria-label="Permalink to &quot;StyleManager&quot;">​</a></h3><p><strong>Файл:</strong> <code>styles/StyleManager.ts</code></p><p>Централизованное управление стилями canvas context с автоматическим масштабированием pixel ratio.</p><p><strong>Возможности:</strong></p><ul><li>Fluent API для операций со стилями</li><li>Автоматическое масштабирование размеров по pixel ratio</li><li>Сокращение избыточных изменений состояния стилей</li><li>Поддержка цепочек методов</li></ul><p><strong>Использование:</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { StyleManager } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/core/styles/StyleManager&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> styleManager</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StyleManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context, pixelRatio)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">styleManager</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFillStyle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#ff0000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setLineWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setGlobalAlpha</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">withShadow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;rgba(0,0,0,0.3)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>См. <a href="./styles/README.html">styles/README.md</a> для полной документации.</p><h3 id="scrollbarrenderer" tabindex="-1">ScrollbarRenderer <a class="header-anchor" href="#scrollbarrenderer" aria-label="Permalink to &quot;ScrollbarRenderer&quot;">​</a></h3><p><strong>Файл:</strong> <code>renderers/ScrollbarRenderer.ts</code></p><p>Рендерит скроллбары для overflow контейнеров.</p><p><strong>Возможности:</strong></p><ul><li>Дизайн скроллбара в форме таблетки</li><li>Настраиваемый внешний вид</li><li>Автоматический размер бегунка</li><li>Пиксель-перфектный рендеринг</li></ul><p><strong>Использование:</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ScrollbarRenderer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/core/renderers/ScrollbarRenderer&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> scrollbarRenderer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ScrollbarRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scrollbarRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  object: mesh,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  x: meshX,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  y: meshY,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  pixelRatio: window.devicePixelRatio</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>См. <a href="./renderers/README.html">renderers/README.md</a> для полной документации.</p><h2 id="архитектурные-принципы" tabindex="-1">Архитектурные принципы <a class="header-anchor" href="#архитектурные-принципы" aria-label="Permalink to &quot;Архитектурные принципы&quot;">​</a></h2><h3 id="граф-сцены" tabindex="-1">Граф сцены <a class="header-anchor" href="#граф-сцены" aria-label="Permalink to &quot;Граф сцены&quot;">​</a></h3><p>Canvas Core использует иерархический граф сцены аналогичный Three.js:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Scene (корень)</span></span>
<span class="line"><span>├── Mesh (geometry + material)</span></span>
<span class="line"><span>├── Group</span></span>
<span class="line"><span>│   ├── Mesh</span></span>
<span class="line"><span>│   └── Mesh</span></span>
<span class="line"><span>└── Mesh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>Преимущества:</strong></p><ul><li>Интуитивная организация объектов</li><li>Автоматическое распространение трансформаций</li><li>Простое управление объектами</li><li>Эффективный обход</li></ul><h3 id="система-трансформации" tabindex="-1">Система трансформаций <a class="header-anchor" href="#система-трансформации" aria-label="Permalink to &quot;Система трансформаций&quot;">​</a></h3><p>Трансформации иерархические и кешируются для производительности:</p><ol><li><strong>Локальная трансформация</strong>: позиция/поворот/масштаб объекта</li><li><strong>Мировая трансформация</strong>: Накопленная трансформация от корня до объекта</li><li><strong>Кеширование</strong>: Мировые трансформации кешируются и инвалидируются при изменении</li><li><strong>Поддержка матриц</strong>: Совместимые с Three.js операции с матрицами</li></ol><h3 id="композиция-вместо-наследования" tabindex="-1">Композиция вместо наследования <a class="header-anchor" href="#композиция-вместо-наследования" aria-label="Permalink to &quot;Композиция вместо наследования&quot;">​</a></h3><p>Объекты составлены из:</p><ul><li><strong>Geometry</strong>: Что рисовать (форма)</li><li><strong>Material</strong>: Как рисовать (стиль)</li><li><strong>Transform</strong>: Где рисовать (позиция/поворот/масштаб)</li></ul><p>Это позволяет гибкие комбинации без глубоких иерархий наследования.</p><h3 id="масштабирование-pixel-ratio" tabindex="-1">Масштабирование Pixel Ratio <a class="header-anchor" href="#масштабирование-pixel-ratio" aria-label="Permalink to &quot;Масштабирование Pixel Ratio&quot;">​</a></h3><p>Все операции с размерами автоматически масштабируются по <code>devicePixelRatio</code> для четкого рендеринга на high-DPI дисплеях:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Код пользователя (логические пиксели)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">renderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setLineWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">renderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Внутри (физические пиксели)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.lineWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pixelRatio</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pixelRatio, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pixelRatio, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pixelRatio, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pixelRatio)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="оптимизации-производительности" tabindex="-1">Оптимизации производительности <a class="header-anchor" href="#оптимизации-производительности" aria-label="Permalink to &quot;Оптимизации производительности&quot;">​</a></h2><h3 id="кеширование-мировых-трансформации" tabindex="-1">Кеширование мировых трансформаций <a class="header-anchor" href="#кеширование-мировых-трансформации" aria-label="Permalink to &quot;Кеширование мировых трансформаций&quot;">​</a></h3><p>Object2D кеширует мировые трансформации чтобы избежать перевычисления:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Первый вызов - вычисляет и кеширует</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> transform1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWorldTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Второй вызов - возвращает закешированное (если не инвалидировано)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> transform2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWorldTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Кеш инвалидируется когда:</p><ul><li>Меняется локальная трансформация объекта</li><li>Меняется мировая трансформация родителя</li></ul><h3 id="переиспользование-объектов" tabindex="-1">Переиспользование объектов <a class="header-anchor" href="#переиспользование-объектов" aria-label="Permalink to &quot;Переиспользование объектов&quot;">​</a></h3><p>Система Canvas JSX переиспользует экземпляры Mesh/Group между рендерами для минимизации выделений памяти (см. <a href="../jsx/utils/ObjectManager.ts">../jsx/utils/ObjectManager.ts</a>).</p><h3 id="отсечение-рендеринга" tabindex="-1">Отсечение рендеринга <a class="header-anchor" href="#отсечение-рендеринга" aria-label="Permalink to &quot;Отсечение рендеринга&quot;">​</a></h3><p>Невидимые объекты пропускаются при рендеринге:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setVisible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// obj и все потомки не будут отрисованы</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Используйте <code>traverseVisible()</code> для обхода только видимых.</p><h2 id="точки-интеграции" tabindex="-1">Точки интеграции <a class="header-anchor" href="#точки-интеграции" aria-label="Permalink to &quot;Точки интеграции&quot;">​</a></h2><h3 id="canvas-jsx" tabindex="-1">Canvas JSX <a class="header-anchor" href="#canvas-jsx" aria-label="Permalink to &quot;Canvas JSX&quot;">​</a></h3><p>Canvas Core - основа для Canvas JSX:</p><div class="language-tsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Scene</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> background</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Mesh</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> position</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RectGeometry</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BasicMaterial</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> color</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#ff0000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Компилируется в:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> scene</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setBackground</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mesh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RectGeometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ width: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BasicMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#ff0000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mesh.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mesh)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="геометрии-и-материалы" tabindex="-1">Геометрии и материалы <a class="header-anchor" href="#геометрии-и-материалы" aria-label="Permalink to &quot;Геометрии и материалы&quot;">​</a></h3><p>Canvas Core предоставляет базу для систем геометрий и материалов:</p><ul><li><strong>Геометрии</strong>: Определяют формы (см. <a href="./../geometries/">../geometries/</a>)</li><li><strong>Материалы</strong>: Определяют стили рисования (см. <a href="./../materials/">../materials/</a>)</li></ul><h3 id="css-рендеринг" tabindex="-1">CSS рендеринг <a class="header-anchor" href="#css-рендеринг" aria-label="Permalink to &quot;CSS рендеринг&quot;">​</a></h3><p>Mesh поддерживает CSS-подобный рендеринг для Box компонентов:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mesh._isBox </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mesh._boxStyles </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  width: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;200px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  height: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;100px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  background: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;linear-gradient(to right, red, blue)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  border: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2px solid white&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  borderRadius: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;8px&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="точки-расширения" tabindex="-1">Точки расширения <a class="header-anchor" href="#точки-расширения" aria-label="Permalink to &quot;Точки расширения&quot;">​</a></h2><h3 id="кастомные-типы-объектов" tabindex="-1">Кастомные типы объектов <a class="header-anchor" href="#кастомные-типы-объектов" aria-label="Permalink to &quot;Кастомные типы объектов&quot;">​</a></h3><p>Расширяйте Object2D для кастомных типов объектов:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Sprite</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  texture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Texture</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">texture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Texture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.texture </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> texture</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CanvasRenderingContext2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Кастомный рендеринг</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="кастомныи-рендеринг" tabindex="-1">Кастомный рендеринг <a class="header-anchor" href="#кастомныи-рендеринг" aria-label="Permalink to &quot;Кастомный рендеринг&quot;">​</a></h3><p>Переопределите метод <code>render</code> в Mesh для кастомного рендеринга:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomMesh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CanvasRenderingContext2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pixelRatio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Кастомная логика рендеринга</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx, pixelRatio)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="type-guards" tabindex="-1">Type Guards <a class="header-anchor" href="#type-guards" aria-label="Permalink to &quot;Type Guards&quot;">​</a></h2><p>Используйте свойства типов для идентификации типов объектов:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.isMesh) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // obj это Mesh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.isGroup) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // obj это Group</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="связанная-документация" tabindex="-1">Связанная документация <a class="header-anchor" href="#связанная-документация" aria-label="Permalink to &quot;Связанная документация&quot;">​</a></h2><ul><li><a href="./../jsx/README.html">Canvas JSX README</a> - Система Canvas JSX</li><li><a href="./../jsx/utils/README.html">Canvas JSX Utils README</a> - Утилитные модули JSX</li><li><a href="./renderers/README.html">Renderers README</a> - Специализированные рендереры</li><li><a href="./styles/README.html">Styles README</a> - Управление стилями</li><li><a href="./../geometries/">Geometries</a> - Классы геометрий</li><li><a href="./../materials/">Materials</a> - Классы материалов</li></ul><h2 id="примеры" tabindex="-1">Примеры <a class="header-anchor" href="#примеры" aria-label="Permalink to &quot;Примеры&quot;">​</a></h2><h3 id="базовая-настроика-сцены" tabindex="-1">Базовая настройка сцены <a class="header-anchor" href="#базовая-настроика-сцены" aria-label="Permalink to &quot;Базовая настройка сцены&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CanvasRenderer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/core/CanvasRenderer&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Scene </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/core/Scene&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mesh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/core/Mesh&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { RectGeometry } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/geometries/RectGeometry&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { BasicMaterial } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@sky-modules/canvas/materials/BasicMaterial&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CanvasRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  canvas: document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;canvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> scene</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scene</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setBackground</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#1a1a1a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rect</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RectGeometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ width: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BasicMaterial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#ff0000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rect.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rect)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rect.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rotateZ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scene)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(animate)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="иерархические-трансформации" tabindex="-1">Иерархические трансформации <a class="header-anchor" href="#иерархические-трансформации" aria-label="Permalink to &quot;Иерархические трансформации&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> child1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(geometry1, material1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">child1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 50 пикселей вправо от родителя</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> child2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(geometry2, material2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">child2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 50 пикселей влево от родителя</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(child1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(child2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parent)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Поворот родителя поворачивает обоих потомков вокруг позиции родителя</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rotateZ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="запросы-мировых-трансформации" tabindex="-1">Запросы мировых трансформаций <a class="header-anchor" href="#запросы-мировых-трансформации" aria-label="Permalink to &quot;Запросы мировых трансформаций&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mesh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(geometry, material)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mesh.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">group.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">group.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRotation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">group.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mesh)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Локальная позиция: (100, 100)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mesh.position)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Мировая позиция: (50, 50) + повернутая (100, 100)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mesh.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWorldPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Преобразовать мировую точку в локальные координаты</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> localPoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mesh.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">worldToLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vector2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="обход-сцены" tabindex="-1">Обход сцены <a class="header-anchor" href="#обход-сцены" aria-label="Permalink to &quot;Обход сцены&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Найти все mesh&#39;и в сцене</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> meshes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">traverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.isMesh) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    meshes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Найти объект по имени</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> player</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getObjectByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;player&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Обновить все видимые объекты</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scene.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">traverseVisible</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (obj.isMesh) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    obj.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rotateZ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div></div></main><footer class="VPDocFooter" data-v-647e6379 data-v-5b7d129d><!--[--><!--]--><div class="edit-info" data-v-5b7d129d><div class="edit-link" data-v-5b7d129d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/empty-set-dev/sky-modules/edit/main/docs/ru/modules/canvas/core.md" target="_blank" rel="noreferrer" data-v-5b7d129d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-5b7d129d></span> Edit this page<!--]--></a></div><!----></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-72122534 data-v-35f8580d><div class="container" data-v-35f8580d><p class="message" data-v-35f8580d>Released under the ISC License.</p><p class="copyright" data-v-35f8580d>Copyright © 2025 Anya Sky</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"guide_getting-started.md\":\"DCEEzigl\",\"guide_playground-test.md\":\"0KsTV48R\",\"index.md\":\"U07tHovU\",\"modules_index.md\":\"dywL9nTr\",\"packages_index.md\":\"B0PyVTZ3\",\"playground_index.md\":\"CQUTTR0K\",\"ru_guide_getting-started.md\":\"DeFPWqji\",\"ru_index.md\":\"1yTRf9qz\",\"ru_modules_canvas_canvas.md\":\"LzMSMDbs\",\"ru_modules_canvas_core.md\":\"rRTU9hFc\",\"ru_modules_canvas_geometries.md\":\"DhNFRaLT\",\"ru_modules_canvas_jsx.md\":\"u5WeJJx-\",\"ru_modules_canvas_materials.md\":\"D_Igy6kP\",\"ru_modules_core_array.md\":\"CSX3Q72x\",\"ru_modules_core_assert.md\":\"Cqm7elWZ\",\"ru_modules_core_assume.md\":\"CLlpCbPL\",\"ru_modules_core_async-creation.md\":\"DKr2ni2n\",\"ru_modules_core_async.md\":\"Bz-cmUO-\",\"ru_modules_core_bind.md\":\"Zpo-fs7X\",\"ru_modules_core_callback.md\":\"DxJnoEdR\",\"ru_modules_core_canclone.md\":\"O17l-0_M\",\"ru_modules_core_class.md\":\"Bg7QUZgD\",\"ru_modules_core_console.md\":\"CXiF2Rg8\",\"ru_modules_core_core.md\":\"CD_pklnp\",\"ru_modules_core_deferred.md\":\"DQiQJojJ\",\"ru_modules_core_define.md\":\"CdYF5ECQ\",\"ru_modules_core_definemeasures.md\":\"CR3eaPYt\",\"ru_modules_core_disposable.md\":\"Cbq9lT3L\",\"ru_modules_core_env.md\":\"CJ1enqmw\",\"ru_modules_core_errors.md\":\"CuISBfA2\",\"ru_modules_core_eventemitter.md\":\"CtzhewVr\",\"ru_modules_core_events.md\":\"DYq8ZSoy\",\"ru_modules_core_fetch.md\":\"BO9iMqFl\",\"ru_modules_core_globalify.md\":\"DoDm19wY\",\"ru_modules_core_hmr.md\":\"BQc59ndT\",\"ru_modules_core_hooks.md\":\"BokoX52n\",\"ru_modules_core_idle.md\":\"D-lVak1u\",\"ru_modules_core_justtry.md\":\"CiipPEiG\",\"ru_modules_core_map.md\":\"B1ftFcA2\",\"ru_modules_core_math.md\":\"CS3fO9jy\",\"ru_modules_core_measures.md\":\"DIzJw-GZ\",\"ru_modules_core_mergenamespace.md\":\"DnUEbOP0\",\"ru_modules_core_mixin.md\":\"DV5Zi0Uo\",\"ru_modules_core_mode.md\":\"BXljbNXY\",\"ru_modules_core_not.md\":\"BxF9xVu_\",\"ru_modules_core_object.md\":\"C_Wr2xBO\",\"ru_modules_core_promisepool.md\":\"BY2Vg0b5\",\"ru_modules_core_repeat.md\":\"Cpt7-cE5\",\"ru_modules_core_runtime.md\":\"CiXsxdAz\",\"ru_modules_core_switch_thread.md\":\"_BWbdn12\",\"ru_modules_core_transform.md\":\"Cw9MMaTc\",\"ru_modules_core_type-guards.md\":\"CGm_RZo5\",\"ru_modules_core_utility-types.md\":\"DfBSNzPE\",\"ru_modules_design_box.md\":\"DsQeKCu7\",\"ru_modules_design_brand.md\":\"1JY3ryZM\",\"ru_modules_design_design.md\":\"BM6CPKMA\",\"ru_modules_design_designsystem.md\":\"BsIPIXq3\",\"ru_modules_design_layout.md\":\"BRm-f1ww\",\"ru_modules_features_ecs.md\":\"HmOoRLL1\",\"ru_modules_features_effect.md\":\"DeGSE40C\",\"ru_modules_features_features.md\":\"BCRnGIcU\",\"ru_modules_index.md\":\"ZOhQl7WA\",\"ru_modules_jsx_jsx.md\":\"D8SHngXR\",\"ru_modules_math_math.md\":\"BX7xzZal\",\"ru_modules_platform_platform.md\":\"DmjQRM6O\",\"ru_modules_react_react.md\":\"EWaDNqwo\",\"ru_modules_solid_solid.md\":\"8aJepHYj\",\"ru_modules_svelte_svelte.md\":\"CG66Kt9i\",\"ru_modules_three_three.md\":\"Ca0OMQ4n\",\"ru_modules_universal_buttons.md\":\"DUcIfbS7\",\"ru_modules_universal_forms.md\":\"CiVEn7w5\",\"ru_modules_universal_layout.md\":\"CrEELJ0m\",\"ru_modules_universal_popover.md\":\"D9kCdm44\",\"ru_modules_universal_slotroot.md\":\"DDMD-n8_\",\"ru_modules_universal_typegraphy.md\":\"BJ5e9SFI\",\"ru_modules_universal_universal.md\":\"Cru-Su8e\",\"ru_modules_vike_vike.md\":\"DCXf1mYE\",\"ru_modules_vue_vue.md\":\"BrPo9qAS\",\"ru_packages_index.md\":\"D2ZOG4Uo\",\"ru_playground_index.md\":\"DKmo-ME5\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Sky Modules\",\"description\":\"Sky Modules\",\"base\":\"/sky-modules/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Guide\",\"link\":\"/guide/getting-started\"},{\"text\":\"Modules\",\"link\":\"/modules/\"},{\"text\":\"Examples\",\"link\":\"/playground/\"},{\"text\":\"Playground\",\"link\":\"/playground/\"},{\"text\":\"NPM\",\"items\":[{\"text\":\"__PACKAGE_NAME__\",\"link\":\"__PACKAGE_LINK__\"},{\"text\":\"All packages\",\"link\":\"/packages/\"}]}],\"sidebar\":{\"/modules/\":[]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/empty-set-dev/sky-modules\"},{\"icon\":\"npm\",\"link\":\"https://npmjs.com/~sky-modules\"}],\"footer\":{\"message\":\"Released under the ISC License.\",\"copyright\":\"Copyright © 2025 Anya Sky\"},\"search\":{\"provider\":\"local\"},\"editLink\":{\"pattern\":\"https://github.com/empty-set-dev/sky-modules/edit/main/docs/:path\"}},\"locales\":{\"root\":{\"label\":\"English\",\"lang\":\"en\",\"title\":\"Sky Modules\",\"description\":\"Sky Modules\"},\"ru\":{\"label\":\"Русский\",\"lang\":\"ru\",\"title\":\"Sky Modules\",\"description\":\"Мощные TypeScript утилиты для современной разработки\",\"themeConfig\":{\"nav\":[{\"text\":\"Руководство\",\"link\":\"/ru/guide/getting-started\"},{\"text\":\"Модули\",\"link\":\"/ru/modules/\"},{\"text\":\"Примеры\",\"link\":\"/ru/playground/\"},{\"text\":\"Песочница\",\"link\":\"/ru/playground/\"},{\"text\":\"NPM\",\"items\":[{\"text\":\"@sky-modules/core\",\"link\":\"https://npmjs.com/package/@sky-modules/core\"},{\"text\":\"Все пакеты\",\"link\":\"/ru/packages/\"}]}],\"sidebar\":{\"/ru/modules/\":[]}}}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>