# Sky Modules

–ú–æ—â–Ω—ã–µ TypeScript —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install @sky-modules/core
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { mergeNamespace, globalify } from '@sky-modules/core'

// Merge objects with type safety
const result = mergeNamespace(obj1, obj2)

// Add to global scope
globalify({ myUtility: someFunction })
```

## –ú–æ–¥—É–ª–∏


### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- **–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏**
    - [.](#.)
    - [env](#env)

- **platform**
    - [.](#.)

- **canvas**
    - [.](#.)


## –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

### .

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ) ‚Ä¢ [–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥](https://github.com/empty-set-dev/sky-modules/tree/main/core/.)

### @sky-modules/core

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è –°—Ä–µ–¥–∞ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - –º–æ—â–Ω—ã–π TypeScript —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è real-time —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è.

#### üåü –ß—Ç–æ —Ç–∞–∫–æ–µ Sky Core?

Sky Core - —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É—Ç–∏–ª–∏—Ç, —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:

- **–†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ** (–∫–∞–∫ MobX) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–°–µ—Ç–µ–≤—É—é –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** (–∫–∞–∫ Colyseus) - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–°–∏—Å—Ç–µ–º—É –°—Ö–µ–º** (–∫–∞–∫ Zod) - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∞—Å—Å–æ–≤ —á–µ—Ä–µ–∑ —Å–µ—Ç—å/–¥–∏—Å–∫

–í—Å—ë –≤ –æ–¥–Ω–æ–º –±–µ—Å—à–æ–≤–Ω–æ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ —Å **–Ω—É–ª–µ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π**.

#### üéØ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:

- üéÆ **–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–≥—Ä** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìù **–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤** - –∫–∞–∫ Figma, Google Docs
- üí¨ **Real-time —á–∞—Ç–æ–≤** - —Å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- üìä **–ñ–∏–≤—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üîÑ **Offline-first –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** - —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- üåê **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏

#### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```typescript
import '@sky-modules/core/define'

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–π –∫–ª–∞—Å—Å
@define('app.User')
class User {
    @string name
    @number x = 0
    @number y = 0

    move(dx: number, dy: number) {
        this.x += dx
        this.y += dy
    }
}

// –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä
const user = new User()
user.name = '–ê–Ω—è'

// –î–µ–ª–∏–º—Å—è –∏–º –ø–æ —Å–µ—Ç–∏
share(user, (updates, pretty) => {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º
    websocket.send(updates)

    console.log('–ò–∑–º–µ–Ω–∏–ª–æ—Å—å:', pretty.set)
    // –ò–∑–º–µ–Ω–∏–ª–æ—Å—å: [['app.User', 123, { x: 10, y: 20 }]]
})

// –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
user.move(10, 20) // –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

#### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

Sky Core –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

##### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–∫–∞–∫ MobX)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

```typescript
@define('app.Counter')
class Counter {
    @number count = 0

    increment() {
        this.count++
    }
}

const counter = new Counter()

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
reaction(() => {
    console.log('–°—á–µ—Ç—á–∏–∫:', counter.count)
})

counter.increment() // –ö–æ–Ω—Å–æ–ª—å: "–°—á–µ—Ç—á–∏–∫: 1"
counter.increment() // –ö–æ–Ω—Å–æ–ª—å: "–°—á–µ—Ç—á–∏–∫: 2"
```

##### 2. –°–µ—Ç–µ–≤–∞—è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ —Å–µ—Ç–∏:

```typescript
// –°–µ—Ä–≤–µ—Ä
const gameState = new GameState()

share(gameState, (updates) => {
    // –†–∞—Å—Å—ã–ª–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–µ –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ!)
    clients.forEach(client => {
        client.send(updates)
    })
})

// –ö–ª–∏–µ–Ω—Ç
websocket.on('message', (updates) => {
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
    apply(localGameState, updates)
})
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:**
```typescript
// –í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Å–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (100+ –ö–ë):
{ player: { x: 100, y: 200, health: 80, ... } }

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è (< 1 –ö–ë):
[[UPDATE_TYPE.SET, [[playerId, [[0, 100], [1, 200]]]]]]
```

##### 3. –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∞—Å—Å–æ–≤:

```typescript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞ –¥–∏—Å–∫/–≤ –±–∞–∑—É
const json = save(user)
// {
//   __class: 'app.User',
//   __id: 123,
//   name: '–ê–Ω—è',
//   x: 10,
//   y: 20
// }

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å –¥–∏—Å–∫–∞/–∏–∑ –±–∞–∑—ã
const restored = load(json)
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ User!
restored instanceof User // true
restored.move(5, 5) // –†–∞–±–æ—Ç–∞–µ—Ç!
```

#### üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

##### –ü—É–±–ª–∏—á–Ω–æ–µ API

- **Array** - –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤ (`last()`, `remove()`, `shuffle()`)
- **bind** - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ—Ç–æ–¥–æ–≤
- **mergeNamespace** - –°–ª–∏—è–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω –æ–±—ä–µ–∫—Ç–æ–≤
- **not** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ null/undefined

##### –°–∏—Å—Ç–µ–º–∞ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **define** - –†–µ–µ—Å—Ç—Ä –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **plain/schema** - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- **share/observe** - –°–µ—Ç–µ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **reaction** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **hooks** - –°–∏—Å—Ç–µ–º–∞ middleware –¥–ª—è —Å–æ–±—ã—Ç–∏–π
- **EventEmitter** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- **globalify** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –∏–º–µ–Ω

#### üéÆ –ü—Ä–∏–º–µ—Ä: –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ò–≥—Ä–∞

```typescript
@define('game.Player')
class Player {
    @string name
    @number x = 0
    @number y = 0
    @number health = 100

    move(dx: number, dy: number) {
        this.x += dx
        this.y += dy
    }

    takeDamage(amount: number) {
        this.health = Math.max(0, this.health - amount)
    }
}

@define('game.GameState')
class GameState {
    @array(Player) players = []

    addPlayer(name: string): Player {
        const player = new Player()
        player.name = name
        this.players.push(player)
        return player
    }
}

// –°–µ—Ä–≤–µ—Ä
const game = new GameState()

share(game, (updates, pretty) => {
    // –†–∞—Å—Å—ã–ª–∞–µ–º –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º
    io.emit('game:update', updates)

    // –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    console.log('–ò–≥—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞:', pretty)
})

// –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è
const player = game.addPlayer('–ê–Ω—è')
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å–æ –≤—Å–µ–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏!

// –ò–≥—Ä–æ–∫ –¥–≤–∏–≥–∞–µ—Ç—Å—è
player.move(10, 20)
// –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –æ –¥–≤–∏–∂–µ–Ω–∏–∏, –Ω–µ –≤–µ—Å—å –æ–±—ä–µ–∫—Ç –∏–≥—Ä–æ–∫–∞
```

#### üìù –ü—Ä–∏–º–µ—Ä: Real-time –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è

```typescript
@define('doc.TextDocument')
class TextDocument {
    @string title = ''
    @string content = ''
    @array(User) collaborators = []

    updateContent(newContent: string) {
        this.content = newContent
    }
}

// –î–µ–ª–∏–º—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–º
const doc = new TextDocument()
doc.title = '–ú–æ–π –î–æ–∫—É–º–µ–Ω—Ç'

share(doc, (updates) => {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ–º —Å–æ–∞–≤—Ç–æ—Ä–∞–º
    doc.collaborators.forEach(user => {
        sendToUser(user, updates)
    })
})

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç
doc.updateContent('–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!')
// –¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
```

#### üîß –°–∏—Å—Ç–µ–º–∞ –°—Ö–µ–º

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö:

```typescript
// –ü—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã
@string name
@number age
@boolean active

// –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã
@optional.string nickname
@optional.number score

// Nullable —Ç–∏–ø—ã
@nullable.string avatar

// –û–±—ä–µ–∫—Ç—ã
@object(Address) address
@array(Friend) friends

// –§—É–Ω–∫—Ü–∏–∏
@func onUpdate
```

–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ö–µ–º—ã:

```typescript
const AddressSchema = {
    street: string,
    city: string,
    country: string
}

@define('app.User')
class User {
    @string name
    @object(AddressSchema) address
}

// –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ!
const user = new User()
user.address = {
    street: '–¢–≤–µ—Ä—Å–∫–∞—è 1',
    city: '–ú–æ—Å–∫–≤–∞',
    country: '–†–æ—Å—Å–∏—è'
}
```

#### üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

##### –°–∏—Å—Ç–µ–º–∞ Define

–ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å/—Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º —Ä–µ–µ—Å—Ç—Ä–µ:

```typescript
@define('app.MyClass')
class MyClass { }

// –í–Ω—É—Ç—Ä–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
{
    'app.MyClass': {
        name: 'app.MyClass',
        value: MyClass,
        [idSymbol]: 1,
        [uidSymbol]: 'app.MyClass',
        [typeSymbol]: 'class'
    }
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∞—Å—Å–æ–≤
- Hot module replacement
- –°–µ—Ç–µ–≤—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- –û—Ç–ª–∞–¥–∫—É –∏ –∏–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—é

##### –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –°–≤–æ–π—Å—Ç–≤–∞

–ö–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@string`, `@number`, –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –≥–µ—Ç—Ç–µ—Ä—ã/—Å–µ—Ç—Ç–µ—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ:

1. –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç —á—Ç–µ–Ω–∏—è (–¥–ª—è `reaction()`)
2. –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç –∑–∞–ø–∏—Å–∏ (–¥–ª—è `share()`)
3. –ë–∞—Ç—á–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
4. –ù–∞–±–ª—é–¥–∞—é—Ç –∑–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏

```typescript
// –≠—Ç–æ:
@number count

// –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:
get count() {
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ reaction()
    return this._count
}
set count(value) {
    // –£–≤–µ–¥–æ–º–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª–µ–π share()
    // –°—Ç–∞–≤–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è —Å–µ—Ç–∏
    this._count = value
}
```

##### –ü—Ä–æ—Ç–æ–∫–æ–ª –û–±–Ω–æ–≤–ª–µ–Ω–∏–π

–ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∏—Ä—É—é—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:

```typescript
UpdateOfShared.Type.SET: [
    objectId,           // –ö–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è
    [
        [propertyIndex, newValue],  // –ö–∞–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
        [propertyIndex, newValue],
    ]
]
```

–ü—Ä–∏–º–µ—Ä:
```typescript
// –ò–∑–º–µ–Ω–µ–Ω–∏–µ: player.x = 100, player.y = 200
// –ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫:
[UPDATE_TYPE.SET, [[playerId, [[0, 100], [1, 200]]]]]
// ~20 –±–∞–π—Ç –≤–º–µ—Å—Ç–æ ~100+ –±–∞–π—Ç
```

#### üéì –õ—É—á—à–∏–µ –ü—Ä–∞–∫—Ç–∏–∫–∏

##### 1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ @define –¥–ª—è —Ä–∞–∑–¥–µ–ª—è–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
@define('app.User')
class User { }

// ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å
class User { }
```

##### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ
@string name
@number age

// ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
name: string = ''
age: number = 0
```

##### 3. –ë–∞—Ç—á–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ - –æ–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
function movePlayer(dx: number, dy: number) {
    player.x += dx
    player.y += dy
} // –û–¥–Ω–æ —Å–µ—Ç–µ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

// ‚ùå –ü–ª–æ—Ö–æ - –¥–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
player.x += dx  // –°–µ—Ç–µ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
player.y += dy  // –ï—â–µ –æ–¥–Ω–æ —Å–µ—Ç–µ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

##### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

```typescript
@define('game.entities.Player')
@define('game.entities.Enemy')
@define('game.systems.Physics')
```

#### üìö –°–ø—Ä–∞–≤–∫–∞ –ø–æ API

–°–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:

- [Array](./Array/Array.ru.md) - –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤
- [bind](./bind/bind.ru.md) - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ—Ç–æ–¥–æ–≤
- [mergeNamespace](./mergeNamespace/mergeNamespace.ru.md) - –°–ª–∏—è–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω
- [not](./not/not.ru.md) - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è null/undefined

#### üîú –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

- [ ] DevTools —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è Chrome
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å React hooks
- [ ] –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–ª—è offline sync
- [ ] –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] Time-travel –æ—Ç–ª–∞–¥–∫–∞
- [ ] –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

#### ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞—à–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–æ–≤.

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è real-time, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

---

### env

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ) ‚Ä¢ [–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥](https://github.com/empty-set-dev/sky-modules/tree/main/core/env)

–î–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Node.js –∏ –±—Ä–∞—É–∑–µ—Ä–∞.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```typescript
import env from '@sky-modules/core/env'
```

#### API

##### env

–û–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.

```typescript
interface Env {}

const env: Env
```

**–¢–∏–ø:** –†–∞—Å—à–∏—Ä—è–µ–º—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:**
- Node.js: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `process.env`
- –ë—Ä–∞—É–∑–µ—Ä: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `import.meta.env`

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

##### –î–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º

```typescript
import env from '@sky-modules/core/env'

console.log(env.NODE_ENV)
console.log(env.API_URL)
console.log(env.SECRET_KEY)
```

##### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```typescript
import env from '@sky-modules/core/env'

const isDevelopment = env.NODE_ENV === 'development'
const apiUrl = env.API_URL || 'http://localhost:3000'
```

##### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```typescript
declare global {
  interface Env {
    DATABASE_URL: string
    JWT_SECRET: string
    LOG_LEVEL: 'debug' | 'info' | 'warn' | 'error'
  }
}

import env from '@sky-modules/core/env'

const connection = connect(env.DATABASE_URL)
const secret = env.JWT_SECRET
```

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

---


## platform

### .

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ) ‚Ä¢ [–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥](https://github.com/empty-set-dev/sky-modules/tree/main/platform/.)

### –ú–æ–¥—É–ª—å Platform

–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (Node.js, Web, Universal)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (arm64, x64, arm)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –û–°** - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (Mac OS, Windows, Linux, iOS, Android)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω—ã** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–µ
- **Universal Router** - –§–∞–π–ª–æ–≤—ã–π —Ä–æ—É—Ç–∏–Ω–≥ —Å –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π 404

#### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

```typescript
// –î–æ—Å—Ç—É–ø–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ
const ARCH: 'unknown' | 'arm' | 'arm64' | 'x64' | 'web'
const PLATFORM: 'unknown' | 'node' | 'mobile' | 'desktop' | 'web'
const OS: 'unknown' | 'iOS' | 'Android' | 'Mac OS' | 'Windows' | 'Linux' | 'web'
const APP_PLATFORM_TARGET: 'unknown' | 'node' | 'web' | 'universal'
```

##### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import '@sky-modules/platform'

console.log(PLATFORM) // 'node', 'web', 'mobile', 'desktop'
console.log(ARCH) // 'arm64', 'x64', 'arm', 'web'
console.log(OS) // 'Mac OS', 'Windows', 'Linux', 'web'
console.log(APP_PLATFORM_TARGET) // 'node', 'web', 'universal'
```

#### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω—ã

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–µ:

```typescript
import { runsOnSide, runsOnServerSide, runsOnClientSide } from '@sky-modules/platform'

if (runsOnServerSide) {
    // –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥
    console.log('–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ')
}

if (runsOnClientSide) {
    // –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥
    console.log('–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ')
}
```

#### Universal Router

–§–∞–π–ª–æ–≤—ã–π —Ä–æ—É—Ç–∏–Ω–≥ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.

##### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { UniversalRouter, createRoutesFromScreens } from '@sky-modules/platform/universal/router'

// –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —ç–∫—Ä–∞–Ω–æ–≤
const screens = import.meta.glob('./screens/**/*.tsx', { eager: true })

// –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤ —ç–∫—Ä–∞–Ω–æ–≤
const routes = createRoutesFromScreens(screens)

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ä–æ—É—Ç–µ—Ä–∞
const router = new UniversalRouter(routes)

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
router.subscribe(match => {
    if (match) {
        console.log('–¢–µ–∫—É—â–∏–π –º–∞—Ä—à—Ä—É—Ç:', match.path)
        console.log('–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞:', match.params)
        console.log('–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:', match.isLoading)
        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ match.Component
    }
})

// –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
router.navigate('/users/123')

// –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
router.destroy()
```

##### –° –æ–±—Ä–∞–±–æ—Ç–∫–æ–π 404 –∏ –∑–∞–≥—Ä—É–∑–∫–æ–π

```typescript
import NotFound from './screens/NotFound'
import Loading from './screens/Loading'

const router = new UniversalRouter(routes, {
    notFound: NotFound,
    loading: Loading
})
```

##### –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```typescript
// screens/users/[id].tsx - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
export default async () => {
    const Component = await import('./HeavyComponent')
    return Component.default
}

// –ò–ª–∏ —Å import.meta.glob
const screens = import.meta.glob('./screens/**/*.tsx') // –ë–µ–∑ –æ–ø—Ü–∏–∏ eager

const routes = createRoutesFromScreens(screens)
```

–†–æ—É—Ç–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ª–µ–Ω–∏–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø—Ä–æ–≤–µ—Ä—è—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∏ –≤—ã–∑–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Promise. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ª–µ–Ω–∏–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `loading`, –æ–Ω –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- `RouteMatch` –±—É–¥–µ—Ç –∏–º–µ—Ç—å `isLoading: true`
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –∏ `isLoading` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `false`

##### –§–∞–π–ª–æ–≤—ã–π —Ä–æ—É—Ç–∏–Ω–≥

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞–º:

```
screens/
  index.tsx          ‚Üí /
  about.tsx          ‚Üí /about
  users/
    index.tsx        ‚Üí /users
    [id].tsx         ‚Üí /users/:id
  posts/
    [slug].tsx       ‚Üí /posts/:slug
```

##### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∞

```typescript
router.subscribe(match => {
    if (match) {
        // –î–ª—è –º–∞—Ä—à—Ä—É—Ç–∞ /users/:id
        const userId = match.params.id
        console.log('ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', userId)
    }
})
```

#### –ü–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

##### Node.js

```typescript
import '@sky-modules/platform/node'

// –í–∫–ª—é—á–∞–µ—Ç —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç PLATFORM = 'desktop'
// –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –û–°
```

##### Web

```typescript
import '@sky-modules/platform/web'

// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç PLATFORM = 'web'
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç APP_PLATFORM_TARGET = 'web'
```

##### Universal

```typescript
import '@sky-modules/platform/universal'

// –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç Tauri, React Native –∏–ª–∏ Web
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç APP_PLATFORM_TARGET = 'universal'
```

#### –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ –Ω–µ–ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ `Object.assign(global, ...)`.

–ö–∞–∂–¥–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–Ω—Å—Ç–∞–Ω—Ç –ø–µ—Ä–µ–¥ –∏—Ö –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å—é, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å–ª–∞–∏–≤–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–¥.

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

---


## canvas

### .

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ) ‚Ä¢ [–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥](https://github.com/empty-set-dev/sky-modules/tree/main/canvas/.)

–°–∏—Å—Ç–µ–º–∞ 2D —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è —Ñ–∏–≥—É—Ä, —Ç–µ–∫—Å—Ç–∞ –∏ —Å–ª–æ–∂–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–∏ —Å HTML5 Canvas API.

```bash
npm install @sky-modules/core
```

#### Usage

```typescript
import { Canvas } from '@sky-modules/core'
```

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API —Ä–∏—Å–æ–≤–∞–Ω–∏—è** - –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Ä–∏—Å–æ–≤–∞–Ω–∏—è
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ pixel ratio** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏—Å–ø–ª–µ–µ–≤ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≥—Ä–∞—Ñ —Å—Ü–µ–Ω—ã** - –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞–º–∏
- **–°–∏—Å—Ç–µ–º–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤** - –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (–∑–∞–ª–∏–≤–∫–∞, –æ–±–≤–æ–¥–∫–∞, –≥—Ä–∞–¥–∏–µ–Ω—Ç, –ø–∞—Ç—Ç–µ—Ä–Ω)
- **–°–∏—Å—Ç–µ–º–∞ –≥–µ–æ–º–µ—Ç—Ä–∏–∏** - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–∏–≥—É—Ä
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSX** - –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Å—Ü–µ–Ω—ã
- **–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π** - –ü–æ–∑–∏—Ü–∏—è, –ø–æ–≤–æ—Ä–æ—Ç, –º–∞—Å—à—Ç–∞–± —Å –º–∏—Ä–æ–≤—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- **–£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è (—à–µ—Å—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∏, –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞)

#### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import Canvas, { Scene, Mesh, RectGeometry, BasicMaterial } from '@sky-modules/canvas'

// –°–æ–∑–¥–∞–Ω–∏–µ canvas
const canvas = new Canvas({
    size: () => [800, 600],
    pixelRatio: window.devicePixelRatio
})

// –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω—ã
const scene = new Scene()
scene.setBackground('#f0f0f0')

// –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞
const geometry = new RectGeometry(100, 50, 0, 0)
const material = new BasicMaterial({ color: '#ff0000' })
const mesh = new Mesh(geometry, material)

mesh.position.set(400, 300)
scene.add(mesh)

// –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
canvas.render(scene)
```

#### Canvas API

##### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```typescript
new Canvas(parameters: CanvasParameters)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `size(): [number, number]` - –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Ä–∞–∑–º–µ—Ä—ã canvas
- `canvas?: HTMLCanvasElement` - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç canvas
- `pixelRatio?: number` - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–∏–∫—Å–µ–ª–µ–π –¥–ª—è –¥–∏—Å–ø–ª–µ–µ–≤ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `window.devicePixelRatio`)

##### –ú–µ—Ç–æ–¥—ã —Ä–∏—Å–æ–≤–∞–Ω–∏—è

###### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—É—Ç—è–º–∏
- `beginPath()` - –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –ø—É—Ç—å
- `closePath()` - –ó–∞–∫—Ä—ã—Ç—å —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å
- `moveTo(x, y)` - –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å—Å—è –∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
- `lineTo(x, y)` - –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –ª–∏–Ω–∏—é –∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
- `arcTo(x1, y1, x2, y2, radius)` - –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –¥—É–≥—É –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏
- `arc(x, y, radius, startAngle, endAngle, counterclockwise?)` - –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –∫—Ä—É–≥–æ–≤—É—é –¥—É–≥—É
- `ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, counterclockwise?)` - –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å —ç–ª–ª–∏–ø—Ç–∏—á–µ—Å–∫—É—é –¥—É–≥—É
- `quadraticCurveTo(cpx, cpy, x, y)` - –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω—É—é –∫—Ä–∏–≤—É—é
- `bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)` - –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –∫—É–±–∏—á–µ—Å–∫—É—é –∫—Ä–∏–≤—É—é –ë–µ–∑—å–µ
- `rect(x, y, width, height)` - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –∫ –ø—É—Ç–∏

###### –ó–∞–ª–∏–≤–∫–∞ –∏ –æ–±–≤–æ–¥–∫–∞
- `fill()` - –ó–∞–ª–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å
- `stroke()` - –û–±–≤–µ—Å—Ç–∏ —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å
- `clip()` - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å –∫–∞–∫ –æ–±–ª–∞—Å—Ç—å –æ–±—Ä–µ–∑–∫–∏

###### –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏
- `fillRect(x, y, width, height)` - –ó–∞–ª–∏—Ç—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫
- `strokeRect(x, y, width, height)` - –û–±–≤–µ—Å—Ç–∏ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫
- `clearRect(x, y, width, height)` - –û—á–∏—Å—Ç–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞

###### –¢–µ–∫—Å—Ç
- `fillText(text, x, y, maxWidth?)` - –ó–∞–ª–∏—Ç—å —Ç–µ–∫—Å—Ç
- `strokeText(text, x, y, maxWidth?)` - –û–±–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç
- `measureText(text)` - –ò–∑–º–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã —Ç–µ–∫—Å—Ç–∞

###### –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
- `save()` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `restore()` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `scale(x, y)` - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- `rotate(angle)` - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–≤–æ—Ä–æ—Ç–∞
- `translate(x, y)` - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–º–µ—â–µ–Ω–∏—è
- `transform(a, b, c, d, e, f)` - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∞—Ç—Ä–∏—Ü—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
- `setTransform(a, b, c, d, e, f)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞—Ç—Ä–∏—Ü—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
- `resetTransform()` - –°–±—Ä–æ—Å–∏—Ç—å –∫ –µ–¥–∏–Ω–∏—á–Ω–æ–π –º–∞—Ç—Ä–∏—Ü–µ

###### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- `setFillStyle(style)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–≤–µ—Ç/–≥—Ä–∞–¥–∏–µ–Ω—Ç/–ø–∞—Ç—Ç–µ—Ä–Ω –∑–∞–ª–∏–≤–∫–∏
- `setStrokeStyle(style)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–≤–µ—Ç/–≥—Ä–∞–¥–∏–µ–Ω—Ç/–ø–∞—Ç—Ç–µ—Ä–Ω –æ–±–≤–æ–¥–∫–∏
- `setLineWidth(width)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —à–∏—Ä–∏–Ω—É –ª–∏–Ω–∏–∏
- `setLineCap(cap)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∏–ª—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –ª–∏–Ω–∏–∏
- `setLineJoin(join)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∏–ª—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ª–∏–Ω–∏–π
- `setMiterLimit(limit)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç —Å–∫–æ—Å–∞
- `setLineDash(segments)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –ø—É–Ω–∫—Ç–∏—Ä–Ω–æ–π –ª–∏–Ω–∏–∏
- `setLineDashOffset(offset)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ –ø—É–Ω–∫—Ç–∏—Ä–Ω–æ–π –ª–∏–Ω–∏–∏
- `setFont(font)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —à—Ä–∏—Ñ—Ç —Ç–µ–∫—Å—Ç–∞
- `setTextAlign(align)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- `setTextBaseline(baseline)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é –ª–∏–Ω–∏—é —Ç–µ–∫—Å—Ç–∞
- `setGlobalAlpha(alpha)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
- `setGlobalCompositeOperation(operation)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∂–∏–º —Å–º–µ—à–∏–≤–∞–Ω–∏—è

###### –¢–µ–Ω–∏
- `setShadowBlur(blur)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–º—ã—Ç–∏–µ —Ç–µ–Ω–∏
- `setShadowColor(color)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–≤–µ—Ç —Ç–µ–Ω–∏
- `setShadowOffsetX(offset)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ —Ç–µ–Ω–∏ –ø–æ X
- `setShadowOffsetY(offset)` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ —Ç–µ–Ω–∏ –ø–æ Y

###### –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ü–µ–Ω—ã
- `render(scene)` - –û—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –≥—Ä–∞—Ñ —Å—Ü–µ–Ω—ã
- `clear()` - –û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å canvas
- `onResize()` - –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ä canvas

#### –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

##### drawHexagon

–†–∏—Å–æ–≤–∞–Ω–∏–µ —à–µ—Å—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –∏–ª–∏ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —à–µ—Å—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∞:

```typescript
canvas.drawHexagon({
    x: 100,
    y: 100,
    radius: 50,
    angle: 0,           // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç
    sides: [0, 1, 2],   // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
    color: '#ff0000',   // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç –∑–∞–ª–∏–≤–∫–∏
    strokeColor: '#000', // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç –æ–±–≤–æ–¥–∫–∏
    strokeWidth: 2      // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –æ–±–≤–æ–¥–∫–∏
})
```

##### measureText

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π:

```typescript
const metrics = canvas.measureText({
    text: '–ü—Ä–∏–≤–µ—Ç –ú–∏—Ä',
    font: '16px Arial',
    textAlign: 'center',    // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    textBaseline: 'middle'  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
})
```

#### –ì—Ä–∞—Ñ —Å—Ü–µ–Ω—ã

##### Scene

–ö–æ—Ä–Ω–µ–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏—Ä—É–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

```typescript
const scene = new Scene()
scene.setBackground('#ffffff')
scene.add(mesh)
scene.remove(mesh)
```

##### Object2D

–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —Ä–µ–Ω–¥–µ—Ä–∏—Ä—É–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

```typescript
object.position.set(x, y)
object.rotation = angle
object.scale.set(sx, sy)
object.visible = true
object.add(child)
object.remove(child)
object.traverse(callback)
```

##### Mesh

–û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≥–µ–æ–º–µ—Ç—Ä–∏—é –∏ –º–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:

```typescript
const mesh = new Mesh(geometry, material)
mesh.position.set(100, 100)
mesh.render(ctx, pixelRatio)
```

##### Group

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤:

```typescript
const group = new Group()
group.add(mesh1)
group.add(mesh2)
group.position.set(50, 50) // –í–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–æ—Ç–æ–º–∫–æ–≤
```

#### –°–∏—Å—Ç–µ–º–∞ –≥–µ–æ–º–µ—Ç—Ä–∏–∏

##### RectGeometry

```typescript
new RectGeometry(width, height, x?, y?)
```

##### CircleGeometry

```typescript
new CircleGeometry(radius, x?, y?, startAngle?, endAngle?, counterclockwise?)
```

##### EllipseGeometry

```typescript
new EllipseGeometry(radiusX, radiusY, x?, y?, rotation?, startAngle?, endAngle?, counterclockwise?)
```

##### PathGeometry

```typescript
const path = new PathGeometry()
path.moveTo(0, 0)
path.lineTo(100, 100)
path.quadraticCurveTo(150, 50, 200, 100)
path.closePath()
```

#### –°–∏—Å—Ç–µ–º–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

##### BasicMaterial

–ó–∞–ª–∏–≤–∫–∞ —Å–ø–ª–æ—à–Ω—ã–º —Ü–≤–µ—Ç–æ–º:

```typescript
new BasicMaterial({
    color: '#ff0000',
    opacity: 0.8
})
```

##### StrokeMaterial

–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç—É—Ä–∞:

```typescript
new StrokeMaterial({
    color: '#000000',
    lineWidth: 2,
    lineCap: 'round',
    lineJoin: 'round',
    lineDash: [5, 5],
    lineDashOffset: 0,
    opacity: 1.0
})
```

##### GradientMaterial

–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–∞—è –∑–∞–ª–∏–≤–∫–∞:

```typescript
const gradient = ctx.createLinearGradient(0, 0, 100, 100)
gradient.addColorStop(0, '#ff0000')
gradient.addColorStop(1, '#0000ff')

new GradientMaterial({
    gradient,
    opacity: 1.0
})
```

##### PatternMaterial

–ó–∞–ª–∏–≤–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º:

```typescript
const pattern = ctx.createPattern(image, 'repeat')

new PatternMaterial({
    pattern,
    opacity: 1.0
})
```

#### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSX

–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Å—Ü–µ–Ω—ã:

```typescript
import { CanvasJSXRenderer } from '@sky-modules/canvas'

const renderer = new CanvasJSXRenderer({
    container: document.body
})

renderer.render(
    <scene background="#f0f0f0">
        <mesh position={[400, 300]} rotation={Math.PI / 4}>
            <rectGeometry width={100} height={50} />
            <basicMaterial color="#ff0000" />
        </mesh>

        <group position={[200, 200]}>
            <mesh>
                <circleGeometry radius={25} />
                <strokeMaterial color="#0000ff" lineWidth={3} />
            </mesh>
        </group>
    </scene>
)
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ Pixel Ratio

–í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–∏–∫—Å–µ–ª–µ–π:

```typescript
const canvas = new Canvas({
    size: () => [400, 300],
    pixelRatio: 2  // 2x –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è retina –¥–∏—Å–ø–ª–µ–µ–≤
})

// –†–∏—Å–æ–≤–∞–Ω–∏–µ –≤ (100, 100) —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ä–∏—Å—É–µ—Ç –≤ (200, 200) –Ω–∞ canvas
canvas.fillRect(100, 100, 50, 50)
```

#### –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π** - –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ä–∏—Å–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É save/restore
2. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤** - –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö
3. **–û—Ç—Å–µ—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏** - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ `visible: false` –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤–Ω–µ —ç–∫—Ä–∞–Ω–∞
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π** - –ò–∑–±–µ–≥–∞–π—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤** - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏

#### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤

- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTML5 Canvas
- –û–∫—Ä—É–∂–µ–Ω–∏–µ ES2015+
- TypeScript 4.0+

#### –°–≤—è–∑–∞–Ω–Ω–æ–µ

- [Geometry](./Geometry.md) - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–∏–≥—É—Ä
- [Material](./Material.md) - –°—Ç–∏–ª–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- [Object2D](./Object2D.md) - –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)

---


## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/empty-set-dev/sky-modules.git
cd sky-modules

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –ó–∞–ø—É—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pnpm dev
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://empty-set-dev.github.io/sky-modules)
- üéÆ [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](https://empty-set-dev.github.io/sky-modules/playground)
- üõ†Ô∏è [API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫](https://empty-set-dev.github.io/sky-modules/modules)

## –õ–∏—Ü–µ–Ω–∑–∏—è

ISC License - —Å–º–æ—Ç—Ä–∏—Ç–µ [LICENSE](LICENSE) —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –∫–æ–º–∞–Ω–¥–æ–π Empty Set Dev
