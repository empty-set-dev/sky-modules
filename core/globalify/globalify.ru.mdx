# Globalify

Утилита для добавления модулей и функций в глобальную область видимости.

## Основное использование

```typescript
import globalify from 'sky/core/globalify'

// Добавить модуль в глобальную область
namespace MyModule {
    export function hello() {
        return 'Hello World!'
    }

    export const VERSION = '1.0.0'
}

globalify(MyModule)

// Теперь доступно глобально
hello() // 'Hello World!'
VERSION // '1.0.0'
```

## Создание пространств имён

```typescript
// Создание вложенных пространств имён
namespace MyLibrary {
    namespace Utils {
        export function formatDate(date: Date): string {
            return date.toISOString()
        }

        export function randomId(): string {
            return Math.random().toString(36).substring(7)
        }
    }
}

globalify.namespace('app.utils', MyLibrary.Utils)

// Теперь доступно как app.utils.formatDate() и app.utils.randomId()
app.utils.formatDate(new Date())
app.utils.randomId()
```

## Декларация типов для глобальных переменных

Для правильной типизации добавь декларации в глобальную область:

```typescript
import globalify from 'sky/core/globalify'

namespace MyAPI {
    export function request(url: string): Promise<Response> {
        return fetch(url)
    }

    export class ApiError extends Error {
        constructor(message: string, public status: number) {
            super(message)
        }
    }
}

// Добавляем в глобальную область
globalify(MyAPI)

// Декларация типов для TypeScript
declare global {
    const request: typeof MyAPI.request
    const ApiError: typeof MyAPI.ApiError
}
```

## API

### `globalify(module)`

Добавляет все экспорты модуля в глобальную область видимости.

**Параметры:**
- `module: Record<PropertyKey, unknown>` - объект с экспортами для глобализации

### `globalify.namespace(namespace, module)`

Создаёт вложенное пространство имён и добавляет модуль туда.

**Параметры:**
- `namespace: string` - путь пространства имён (разделённый точками)
- `module: Record<PropertyKey, unknown>` - объект с экспортами

**Пример:**
```typescript
// Создаёт глобально доступный объект app.ui.components
globalify.namespace('app.ui.components', {
    Button: MyButton,
    Input: MyInput
})
```

## Внутренняя реализация

Модуль использует `mergeNamespace` для безопасного слияния объектов. Реализация
создает вложенные объекты для пространств имён и сливает предоставленный модуль
в соответствующую область.
