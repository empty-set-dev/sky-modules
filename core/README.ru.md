# @sky-modules/core

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è –°—Ä–µ–¥–∞ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - –º–æ—â–Ω—ã–π TypeScript —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è real-time —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è.

## üåü –ß—Ç–æ —Ç–∞–∫–æ–µ Sky Core?

Sky Core - —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É—Ç–∏–ª–∏—Ç, —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:

- **–†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ** (–∫–∞–∫ MobX) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–°–µ—Ç–µ–≤—É—é –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** (–∫–∞–∫ Colyseus) - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–°–∏—Å—Ç–µ–º—É –°—Ö–µ–º** (–∫–∞–∫ Zod) - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∞—Å—Å–æ–≤ —á–µ—Ä–µ–∑ —Å–µ—Ç—å/–¥–∏—Å–∫

–í—Å—ë –≤ –æ–¥–Ω–æ–º –±–µ—Å—à–æ–≤–Ω–æ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ —Å **–Ω—É–ª–µ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π**.

## üéØ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:

- üéÆ **–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–≥—Ä** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìù **–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤** - –∫–∞–∫ Figma, Google Docs
- üí¨ **Real-time —á–∞—Ç–æ–≤** - —Å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- üìä **–ñ–∏–≤—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üîÑ **Offline-first –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** - —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- üåê **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```typescript
import '@sky-modules/core/define'

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–π –∫–ª–∞—Å—Å
@define('app.User')
class User {
    @string name
    @number x = 0
    @number y = 0

    move(dx: number, dy: number) {
        this.x += dx
        this.y += dy
    }
}

// –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä
const user = new User()
user.name = '–ê–Ω—è'

// –î–µ–ª–∏–º—Å—è –∏–º –ø–æ —Å–µ—Ç–∏
share(user, (updates, pretty) => {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º
    websocket.send(updates)

    console.log('–ò–∑–º–µ–Ω–∏–ª–æ—Å—å:', pretty.set)
    // –ò–∑–º–µ–Ω–∏–ª–æ—Å—å: [['app.User', 123, { x: 10, y: 20 }]]
})

// –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
user.move(10, 20) // –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

Sky Core –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–∫–∞–∫ MobX)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

```typescript
@define('app.Counter')
class Counter {
    @number count = 0

    increment() {
        this.count++
    }
}

const counter = new Counter()

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
reaction(() => {
    console.log('–°—á–µ—Ç—á–∏–∫:', counter.count)
})

counter.increment() // –ö–æ–Ω—Å–æ–ª—å: "–°—á–µ—Ç—á–∏–∫: 1"
counter.increment() // –ö–æ–Ω—Å–æ–ª—å: "–°—á–µ—Ç—á–∏–∫: 2"
```

### 2. –°–µ—Ç–µ–≤–∞—è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ —Å–µ—Ç–∏:

```typescript
// –°–µ—Ä–≤–µ—Ä
const gameState = new GameState()

share(gameState, (updates) => {
    // –†–∞—Å—Å—ã–ª–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–µ –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ!)
    clients.forEach(client => {
        client.send(updates)
    })
})

// –ö–ª–∏–µ–Ω—Ç
websocket.on('message', (updates) => {
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
    apply(localGameState, updates)
})
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:**
```typescript
// –í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Å–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (100+ –ö–ë):
{ player: { x: 100, y: 200, health: 80, ... } }

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è (< 1 –ö–ë):
[[UPDATE_TYPE.SET, [[playerId, [[0, 100], [1, 200]]]]]]
```

### 3. –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∞—Å—Å–æ–≤:

```typescript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞ –¥–∏—Å–∫/–≤ –±–∞–∑—É
const json = save(user)
// {
//   __class: 'app.User',
//   __id: 123,
//   name: '–ê–Ω—è',
//   x: 10,
//   y: 20
// }

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å –¥–∏—Å–∫–∞/–∏–∑ –±–∞–∑—ã
const restored = load(json)
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ User!
restored instanceof User // true
restored.move(5, 5) // –†–∞–±–æ—Ç–∞–µ—Ç!
```

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

### –ü—É–±–ª–∏—á–Ω–æ–µ API

- **Array** - –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤ (`last()`, `remove()`, `shuffle()`)
- **bind** - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ—Ç–æ–¥–æ–≤
- **mergeNamespace** - –°–ª–∏—è–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω –æ–±—ä–µ–∫—Ç–æ–≤
- **not** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ null/undefined

### –°–∏—Å—Ç–µ–º–∞ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **define** - –†–µ–µ—Å—Ç—Ä –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **plain/schema** - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- **share/observe** - –°–µ—Ç–µ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **reaction** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **hooks** - –°–∏—Å—Ç–µ–º–∞ middleware –¥–ª—è —Å–æ–±—ã—Ç–∏–π
- **EventEmitter** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- **globalify** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –∏–º–µ–Ω

## üéÆ –ü—Ä–∏–º–µ—Ä: –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ò–≥—Ä–∞

```typescript
@define('game.Player')
class Player {
    @string name
    @number x = 0
    @number y = 0
    @number health = 100

    move(dx: number, dy: number) {
        this.x += dx
        this.y += dy
    }

    takeDamage(amount: number) {
        this.health = Math.max(0, this.health - amount)
    }
}

@define('game.GameState')
class GameState {
    @array(Player) players = []

    addPlayer(name: string): Player {
        const player = new Player()
        player.name = name
        this.players.push(player)
        return player
    }
}

// –°–µ—Ä–≤–µ—Ä
const game = new GameState()

share(game, (updates, pretty) => {
    // –†–∞—Å—Å—ã–ª–∞–µ–º –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º
    io.emit('game:update', updates)

    // –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    console.log('–ò–≥—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞:', pretty)
})

// –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è
const player = game.addPlayer('–ê–Ω—è')
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å–æ –≤—Å–µ–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏!

// –ò–≥—Ä–æ–∫ –¥–≤–∏–≥–∞–µ—Ç—Å—è
player.move(10, 20)
// –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –æ –¥–≤–∏–∂–µ–Ω–∏–∏, –Ω–µ –≤–µ—Å—å –æ–±—ä–µ–∫—Ç –∏–≥—Ä–æ–∫–∞
```

## üìù –ü—Ä–∏–º–µ—Ä: Real-time –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è

```typescript
@define('doc.TextDocument')
class TextDocument {
    @string title = ''
    @string content = ''
    @array(User) collaborators = []

    updateContent(newContent: string) {
        this.content = newContent
    }
}

// –î–µ–ª–∏–º—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–º
const doc = new TextDocument()
doc.title = '–ú–æ–π –î–æ–∫—É–º–µ–Ω—Ç'

share(doc, (updates) => {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ–º —Å–æ–∞–≤—Ç–æ—Ä–∞–º
    doc.collaborators.forEach(user => {
        sendToUser(user, updates)
    })
})

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∞–µ—Ç
doc.updateContent('–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!')
// –¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
```

## üîß –°–∏—Å—Ç–µ–º–∞ –°—Ö–µ–º

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö:

```typescript
// –ü—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã
@string name
@number age
@boolean active

// –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã
@optional.string nickname
@optional.number score

// Nullable —Ç–∏–ø—ã
@nullable.string avatar

// –û–±—ä–µ–∫—Ç—ã
@object(Address) address
@array(Friend) friends

// –§—É–Ω–∫—Ü–∏–∏
@func onUpdate
```

–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ö–µ–º—ã:

```typescript
const AddressSchema = {
    street: string,
    city: string,
    country: string
}

@define('app.User')
class User {
    @string name
    @object(AddressSchema) address
}

// –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ!
const user = new User()
user.address = {
    street: '–¢–≤–µ—Ä—Å–∫–∞—è 1',
    city: '–ú–æ—Å–∫–≤–∞',
    country: '–†–æ—Å—Å–∏—è'
}
```

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°–∏—Å—Ç–µ–º–∞ Define

–ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å/—Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º —Ä–µ–µ—Å—Ç—Ä–µ:

```typescript
@define('app.MyClass')
class MyClass { }

// –í–Ω—É—Ç—Ä–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
{
    'app.MyClass': {
        name: 'app.MyClass',
        value: MyClass,
        [idSymbol]: 1,
        [uidSymbol]: 'app.MyClass',
        [typeSymbol]: 'class'
    }
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∞—Å—Å–æ–≤
- Hot module replacement
- –°–µ—Ç–µ–≤—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- –û—Ç–ª–∞–¥–∫—É –∏ –∏–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—é

### –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –°–≤–æ–π—Å—Ç–≤–∞

–ö–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@string`, `@number`, –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –≥–µ—Ç—Ç–µ—Ä—ã/—Å–µ—Ç—Ç–µ—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ:

1. –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç —á—Ç–µ–Ω–∏—è (–¥–ª—è `reaction()`)
2. –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç –∑–∞–ø–∏—Å–∏ (–¥–ª—è `share()`)
3. –ë–∞—Ç—á–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
4. –ù–∞–±–ª—é–¥–∞—é—Ç –∑–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏

```typescript
// –≠—Ç–æ:
@number count

// –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:
get count() {
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ reaction()
    return this._count
}
set count(value) {
    // –£–≤–µ–¥–æ–º–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª–µ–π share()
    // –°—Ç–∞–≤–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è —Å–µ—Ç–∏
    this._count = value
}
```

### –ü—Ä–æ—Ç–æ–∫–æ–ª –û–±–Ω–æ–≤–ª–µ–Ω–∏–π

–ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∏—Ä—É—é—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:

```typescript
UpdateOfShared.Type.SET: [
    objectId,           // –ö–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è
    [
        [propertyIndex, newValue],  // –ö–∞–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
        [propertyIndex, newValue],
    ]
]
```

–ü—Ä–∏–º–µ—Ä:
```typescript
// –ò–∑–º–µ–Ω–µ–Ω–∏–µ: player.x = 100, player.y = 200
// –ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫:
[UPDATE_TYPE.SET, [[playerId, [[0, 100], [1, 200]]]]]
// ~20 –±–∞–π—Ç –≤–º–µ—Å—Ç–æ ~100+ –±–∞–π—Ç
```

## üéì –õ—É—á—à–∏–µ –ü—Ä–∞–∫—Ç–∏–∫–∏

### 1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ @define –¥–ª—è —Ä–∞–∑–¥–µ–ª—è–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ
@define('app.User')
class User { }

// ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å
class User { }
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ
@string name
@number age

// ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
name: string = ''
age: number = 0
```

### 3. –ë–∞—Ç—á–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ

```typescript
// ‚úÖ –•–æ—Ä–æ—à–æ - –æ–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
function movePlayer(dx: number, dy: number) {
    player.x += dx
    player.y += dy
} // –û–¥–Ω–æ —Å–µ—Ç–µ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

// ‚ùå –ü–ª–æ—Ö–æ - –¥–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
player.x += dx  // –°–µ—Ç–µ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
player.y += dy  // –ï—â–µ –æ–¥–Ω–æ —Å–µ—Ç–µ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

```typescript
@define('game.entities.Player')
@define('game.entities.Enemy')
@define('game.systems.Physics')
```

## üìö –°–ø—Ä–∞–≤–∫–∞ –ø–æ API

–°–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:

- [Array](./Array/Array.ru.md) - –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤
- [bind](./bind/bind.ru.md) - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ—Ç–æ–¥–æ–≤
- [mergeNamespace](./mergeNamespace/mergeNamespace.ru.md) - –°–ª–∏—è–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º–µ–Ω
- [not](./not/not.ru.md) - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è null/undefined

## üîú –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

- [ ] DevTools —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è Chrome
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å React hooks
- [ ] –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–ª—è offline sync
- [ ] –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] Time-travel –æ—Ç–ª–∞–¥–∫–∞
- [ ] –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞—à–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–æ–≤.

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è real-time, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**
